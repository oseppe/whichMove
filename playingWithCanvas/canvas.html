<!DOCTYPE html>
<html>
<head>
	<title>canvas</title>
	<script type="text/javascript">
    'use strict'
    const sprite = {
      height: 10,
      width: 10,
      alpha: 1,
      alphaChange: 0.05,
      x: -2,
      y: -2,
      draw: function(ctx) {
        // let xPosition = computeXOfCenteredFigure(x, this.height);
        // let yPosition = computeXOfCenteredFigure(y, this.width);

        ctx.fillStyle = `rgba(39, 174, 96, ${this.alpha})`;
        ctx.fillRect(this.y, this.x, this.height, this.width);
        return this;
      },
      flicker: function() {
        if (this.alpha >= 1 || this.alpha <= 0) {
          this.alphaChange = this.alphaChange * -1;
        } 
        
        this.alpha = this.alpha + this.alphaChange;
        return this;
      },
      moveX: function(direction = 'up', canvasHeight) {
        let change = this.height * 0.10;

        if (direction === 'up') change = change * -1;

        let newX = this.x + change;

        if (direction === 'up') {
          newX = (newX < 0) ? 0 : newX;
        }        
        else if (direction === 'down') {
          let downBorder = canvasHeight - this.height;

          newX = (newX >= downBorder) ? downBorder : newX;
        }

        this.x = newX;

        return this;
      },
      moveY: function(direction = 'left', canvasWidth) {
        let change = this.width * 0.10;

        if (direction === 'left') change = change * -1;

        let newY = this.y + change;

        if (direction === 'left') {
          newY = (newY < 0) ? 0 : newY;
        }
        else if (direction === 'right') {
          let rightBorder = canvasWidth - this.width;

          newY = (newY >= rightBorder) ? rightBorder : newY;
        }

        this.y = newY;

        return this;
      }
    }

		function draw() {
      let canvas = document.getElementById('canvas');
			if (canvas.getContext) {
				let context = canvas.getContext('2d');

        context.clearRect(0,0, canvas.width, canvas.height);

        if (sprite.x === -2) sprite.x = computeCenter(canvas.height, sprite.height);
        if (sprite.y === -2) sprite.y = computeCenter(canvas.width, sprite.width);

        sprite.draw(context);
        sprite.flicker().moveX('down', canvas.height);

        window.requestAnimationFrame(draw);
			}
		}

    function computeCenter(canvasLength, figureLength) {
      return (canvasLength / 2) - (figureLength / 2);
    }

	</script>
	<style type="text/css">
		canvas { border: 1px solid black; }
	</style>
</head>
<body onload="draw();">
	<canvas id='canvas'>
		Please update your browser or download the <a href="https://www.google.com/chrome/browser/desktop/index.html">latest Google Chrome browser</a>
	</canvas>
</body>
</html>