<!DOCTYPE html>
<html>
<head>
	<title>canvas</title>
	<script type="text/javascript">
    'use strict'
    const sprite = {
      height: 10,
      width: 10,
      alpha: 1,
      alphaChange: 0.05,
      x: -2,
      y: -2,
      draw: function(ctx) {
        // let xPosition = computeXOfCenteredFigure(x, this.height);
        // let yPosition = computeXOfCenteredFigure(y, this.width);

        ctx.fillStyle = `rgba(39, 174, 96, ${this.alpha})`;
        ctx.fillRect(this.y, this.x, this.height, this.width);
        return this;
      },
      flicker: function() {
        if (this.alpha >= 1 || this.alpha <= 0) {
          this.alphaChange = this.alphaChange * -1;
        } 
        
        this.alpha = this.alpha + this.alphaChange;
        return this;
      },
      moveLeft: function() {
        let change = this.width * 0.10;
        let newY = this.y - change;

        this.y = (newY < 0) ? 0 : newY;

        return this;
      }
    }

		function draw() {
      let canvas = document.getElementById('canvas');
			if (canvas.getContext) {
				let context = canvas.getContext('2d');

        context.clearRect(0,0, canvas.width, canvas.height);

        if (sprite.x === -2) sprite.x = computeCenter(canvas.height, sprite.height);
        if (sprite.y === -2) sprite.y = computeCenter(canvas.width, sprite.width);

        sprite.draw(context);
        sprite.flicker();
        sprite.moveLeft();

        window.requestAnimationFrame(draw);
			}
		}

    function computeCenter(canvasLength, figureLength) {
      return (canvasLength / 2) - (figureLength / 2);
    }

	</script>
	<style type="text/css">
		canvas { border: 1px solid black; }
	</style>
</head>
<body onload="draw();">
	<canvas id='canvas'>
		Please update your browser or download the <a href="https://www.google.com/chrome/browser/desktop/index.html">latest Google Chrome browser</a>
	</canvas>
</body>
</html>